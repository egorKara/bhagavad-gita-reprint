# üöÄ –û–¢–ß–ï–¢ –û–ë –ê–ö–¢–ò–í–ê–¶–ò–ò API –°–ï–†–í–ò–°–ê

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:** 25 –∞–≤–≥—É—Å—Ç–∞ 2025, 21:40 MSK  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ê–ö–¢–ò–í–ò–†–û–í–ê–ù –£–°–ü–ï–®–ù–û**  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ü—Ä–æ–µ–∫—Ç:** –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972 Reprint  

---

## üéØ –¶–µ–ª—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å:
- üåê –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç: `gita-1972-reprint.ru`
- üîå API —Å–µ—Ä–≤–µ—Ä: `api.gita-1972-reprint.ru`
- üì± GitHub Pages: `egorkara.github.io`

---

## üîç –ê–Ω–∞–ª–∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### **–ü—Ä–æ–±–ª–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ:**
1. ‚ùå **API —Å–µ—Ä–≤–µ—Ä –ù–ï –∑–∞–ø—É—â–µ–Ω** –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ
2. ‚ùå **systemd —Å–µ—Ä–≤–∏—Å** –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
3. ‚ùå **–ü–æ—Ä—Ç 3000** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
4. ‚ùå **Node.js –ø—Ä–æ—Ü–µ—Å—Å** –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
5. ‚ùå **Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç** –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å

### **–ü—Ä–∏—á–∏–Ω—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –†–∞–∑—Ä—ã–≤ –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –∏ –¥–µ–ø–ª–æ–µ–º
- –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üõ†Ô∏è –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### **1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
- ‚úÖ –°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Node.js v18

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**
- ‚úÖ `undici` –ø–æ–Ω–∏–∂–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ 6.20.0
- ‚úÖ `cheerio` –ø–æ–Ω–∏–∂–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ 1.0.0-rc.12
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `/etc/systemd/system/gita-api.service`
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `oem` (–≤–º–µ—Å—Ç–æ `www-data`)
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### **4. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Å—ã–ª–∫–∞ `/var/www/gita-1972-reprint` ‚Üí —Ç–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- ‚úÖ –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### **‚úÖ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:**
```
‚óè gita-api.service - Gita 1972 API Server
     Active: active (running) since Mon 2025-08-25 21:40:49 MSK
     Main PID: 801475 (node)
     Memory: 1.9M
     CGroup: /system.slice/gita-api.service
             ‚îî‚îÄ801475 /usr/bin/node src/server.js
```

### **‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API:**
- **–ü–æ—Ä—Ç 3000:** ‚úÖ –°–ª—É—à–∞–µ—Ç
- **API endpoint:** ‚úÖ `http://localhost:3000/api/status` —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:** ‚úÖ `{"status":"OK","message":"–°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"}`

### **‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:**
- **systemd:** ‚úÖ –í–∫–ª—é—á–µ–Ω
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
- **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:** ‚úÖ –ü—Ä–∏ —Å–±–æ—è—Ö

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞:**
```ini
[Unit]
Description=Gita 1972 API Server - Translation and Order Management
After=network.target
Wants=network-online.target

[Service]
Type=simple
User=oem
Group=oem
WorkingDirectory=/home/oem/github/bhagavad-gita-reprint
Environment=NODE_ENV=production
Environment=PORT=3000
ExecStart=/usr/bin/node src/server.js
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- **NODE_ENV:** production
- **PORT:** 3000
- **CORS_ORIGINS:** gita-1972-reprint.ru, www.gita-1972-reprint.ru, egorkara.github.io

---

## üö® –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **1. –û—à–∏–±–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Node.js:**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `undici v7` –∏ `cheerio v1.1.2` —Ç—Ä–µ–±—É—é—Ç Node.js v20+
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–Ω–∏–∂–µ–Ω—ã –¥–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è Node.js v18.19.1

### **2. –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:**
- **–ü—Ä–æ–±–ª–µ–º–∞:** `www-data` –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ `oem`

### **3. –û—à–∏–±–∫–∞ NAMESPACE:**
- **–ü—Ä–æ–±–ª–µ–º–∞:** systemd –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—É—Ç—å
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### **–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status gita-api

# –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl start gita-api
sudo systemctl stop gita-api
sudo systemctl restart gita-api

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u gita-api -f
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ systemd journal

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `oem` (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞)
- **–ü–æ—Ä—Ç:** 3000 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **Nginx:** –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å SSL
- **CORS:** –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall** –¥–ª—è –ø–æ—Ä—Ç–∞ 3000
2. **–î–æ–±–∞–≤–∏—Ç—å rate limiting** –≤ Nginx
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å fail2ban** –¥–ª—è –∑–∞—â–∏—Ç—ã API
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### **1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω):**
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo cp deployment/nginx-ssl.conf /etc/nginx/sites-available/api.gita-1972-reprint.ru

# –°–æ–∑–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫
sudo ln -s /etc/nginx/sites-available/api.gita-1972-reprint.ru /etc/nginx/sites-enabled/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
sudo nginx -t && sudo nginx -s reload
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:**
```bash
# –ü–æ–ª—É—á–∏—Ç—å Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d api.gita-1972-reprint.ru
```

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
bash deployment/server-monitor.sh

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron –∑–∞–¥–∞—á–∏
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: */5 * * * * curl -f http://localhost:3000/api/status || systemctl restart gita-api
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|------------|-----|-------|---------|
| **API –¥–æ—Å—Ç—É–ø–µ–Ω** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | üü¢ 100% |
| **–ü–æ—Ä—Ç 3000** | ‚ùå –ó–∞–∫—Ä—ã—Ç | ‚úÖ –û—Ç–∫—Ä—ã—Ç | üü¢ 100% |
| **systemd —Å–µ—Ä–≤–∏—Å** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | üü¢ 100% |
| **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | üü¢ 100% |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | üü¢ 100% |
| **–°—Ç–∞—Ç—É—Å endpoint** | ‚ùå 502 | ‚úÖ 200 | üü¢ 100% |

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**API —Å–µ—Ä–≤–∏—Å —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!** üöÄ

### **–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **100% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** API –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** –∑–∞–ø—É—Å–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:**
- üéØ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑** –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- ‚úÖ **–í—Å–µ –∑–∞–¥–∞—á–∏ —Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- üîç **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- üõ°Ô∏è **Proactive –ø–æ–¥—Ö–æ–¥** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- üîÑ **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Å—Ä–µ–¥–µ!** üåü

---

**–ê–≤—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ Gita 1972  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ  
**–î–∞—Ç–∞:** 25 –∞–≤–≥—É—Å—Ç–∞ 2025, 21:45 MSK
