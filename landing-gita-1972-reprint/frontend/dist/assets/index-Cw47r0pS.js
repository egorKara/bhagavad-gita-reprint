var h=Object.defineProperty;var u=(r,t,e)=>t in r?h(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>u(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();class g{constructor(t,e,n={}){s(this,"container");s(this,"images");s(this,"currentIndex",0);s(this,"options");s(this,"autoPlayTimer",null);s(this,"isTransitioning",!1);s(this,"sliderContainer");s(this,"imageElement");s(this,"titleElement");s(this,"descriptionElement");s(this,"navigationContainer");s(this,"indicatorsContainer");this.container=t,this.images=e,this.options={autoPlay:!0,autoPlayInterval:5e3,showNavigation:!0,showIndicators:!0,transitionDuration:300,loop:!0,...n},this.init()}init(){this.images.length!==0&&(this.createSliderStructure(),this.setupEventListeners(),this.showImage(0),this.options.autoPlay&&this.startAutoPlay())}createSliderStructure(){this.sliderContainer=document.createElement("div"),this.sliderContainer.className="slider-container";const t=document.createElement("div");t.className="slider-image-container",this.imageElement=document.createElement("img"),this.imageElement.className="slider-image",this.imageElement.alt="",t.appendChild(this.imageElement);const e=document.createElement("div");if(e.className="slider-text-container",this.titleElement=document.createElement("h3"),this.titleElement.className="slider-title",e.appendChild(this.titleElement),this.descriptionElement=document.createElement("p"),this.descriptionElement.className="slider-description",e.appendChild(this.descriptionElement),this.options.showNavigation){this.navigationContainer=document.createElement("div"),this.navigationContainer.className="slider-navigation";const n=document.createElement("button");n.className="slider-nav-button prev",n.innerHTML="&#8249;",n.addEventListener("click",()=>this.previous());const i=document.createElement("button");i.className="slider-nav-button next",i.innerHTML="&#8250;",i.addEventListener("click",()=>this.next()),this.navigationContainer.appendChild(n),this.navigationContainer.appendChild(i)}this.options.showIndicators&&(this.indicatorsContainer=document.createElement("div"),this.indicatorsContainer.className="slider-indicators",this.createIndicators()),this.sliderContainer.appendChild(t),this.sliderContainer.appendChild(e),this.navigationContainer&&this.sliderContainer.appendChild(this.navigationContainer),this.indicatorsContainer&&this.sliderContainer.appendChild(this.indicatorsContainer),this.container.appendChild(this.sliderContainer)}createIndicators(){if(this.indicatorsContainer){this.indicatorsContainer.innerHTML="";for(let t=0;t<this.images.length;t++){const e=document.createElement("button");e.className="slider-indicator",e.addEventListener("click",()=>this.showImage(t)),this.indicatorsContainer.appendChild(e)}}}setupEventListeners(){var n,i,a,o;(n=this.sliderContainer)==null||n.addEventListener("mouseenter",()=>this.stopAutoPlay()),(i=this.sliderContainer)==null||i.addEventListener("mouseleave",()=>{this.options.autoPlay&&this.startAutoPlay()});let t=0,e=0;(a=this.sliderContainer)==null||a.addEventListener("touchstart",l=>{t=l.touches[0].clientX}),(o=this.sliderContainer)==null||o.addEventListener("touchend",l=>{e=l.changedTouches[0].clientX;const c=t-e;Math.abs(c)>50&&(c>0?this.next():this.previous())})}showImage(t){if(this.isTransitioning||t<0||t>=this.images.length)return;this.isTransitioning=!0;const e=this.images[t];if(!e){this.isTransitioning=!1;return}this.imageElement&&(this.imageElement.style.transform="scale(0.95)",this.imageElement.style.opacity="0.8"),setTimeout(()=>{this.imageElement&&e&&(this.imageElement.src=e.src,this.imageElement.alt=e.alt,this.imageElement.style.transform="scale(1)",this.imageElement.style.opacity="1"),this.titleElement&&e&&(this.titleElement.textContent=e.title),this.descriptionElement&&e&&(this.descriptionElement.textContent=e.description),this.currentIndex=t,this.updateIndicators(),this.isTransitioning=!1},this.options.transitionDuration)}updateIndicators(){if(!this.indicatorsContainer)return;this.indicatorsContainer.querySelectorAll(".slider-indicator").forEach((e,n)=>{n===this.currentIndex?e.classList.add("active"):e.classList.remove("active")})}next(){let t=this.currentIndex+1;if(t>=this.images.length)if(this.options.loop)t=0;else return;this.showImage(t)}previous(){let t=this.currentIndex-1;if(t<0)if(this.options.loop)t=this.images.length-1;else return;this.showImage(t)}goTo(t){t>=0&&t<this.images.length&&this.showImage(t)}changeLanguage(t){const e=this.images.filter(n=>n.language===t);e.length>0&&(this.images=e,this.currentIndex=0,this.createIndicators(),this.showImage(0))}startAutoPlay(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer),this.autoPlayTimer=window.setInterval(()=>this.next(),this.options.autoPlayInterval)}stopAutoPlay(){this.autoPlayTimer&&(clearInterval(this.autoPlayTimer),this.autoPlayTimer=null)}destroy(){this.stopAutoPlay(),this.sliderContainer&&this.sliderContainer.remove()}}class d{constructor(t,e="ru"){s(this,"currentLanguage");s(this,"translations");s(this,"languageChangeCallbacks",[]);this.translations=t,this.currentLanguage=this.getStoredLanguage()||e,this.applyLanguage(this.currentLanguage)}getStoredLanguage(){try{const t=localStorage.getItem("gita-landing-language");return t==="ru"||t==="en"?t:null}catch{return null}}storeLanguage(t){try{localStorage.setItem("gita-landing-language",t)}catch(e){console.warn("Не удалось сохранить язык в localStorage:",e)}}getCurrentLanguage(){return this.currentLanguage}changeLanguage(t){t!==this.currentLanguage&&(this.currentLanguage=t,this.storeLanguage(t),this.applyLanguage(t),this.notifyLanguageChange(t))}toggleLanguage(){const t=this.currentLanguage==="ru"?"en":"ru";this.changeLanguage(t)}applyLanguage(t){document.documentElement.lang=t,document.querySelectorAll("[data-translate]").forEach(n=>{const i=n.getAttribute("data-translate");i&&this.translations[i]&&(n.textContent=this.translations[i][t])})}translate(t){return this.translations[t]?this.translations[t][this.currentLanguage]:t}onLanguageChange(t){this.languageChangeCallbacks.push(t)}notifyLanguageChange(t){this.languageChangeCallbacks.forEach(e=>{try{e(t)}catch(n){console.error("Ошибка в callback изменения языка:",n)}})}createLanguageToggleButton(t){const e=document.createElement("button");return e.className="language-toggle-button",e.setAttribute("data-translate","language_switch"),e.textContent=this.translate("language_switch"),e.addEventListener("click",()=>this.toggleLanguage()),t.appendChild(e),e}}class m{constructor(){s(this,"languageManager");s(this,"imageSlider");s(this,"translations");this.translations=this.initializeTranslations(),this.languageManager=new d(this.translations,"ru"),this.init()}init(){this.setupLanguageToggle(),this.setupImageSlider(),this.setupSmoothScrolling(),this.setupIntersectionObserver()}initializeTranslations(){return{language_switch:{ru:"EN",en:"RU"},hero_title:{ru:"Бхагавад-гита как она есть",en:"Bhagavad-gita As It Is"},hero_description:{ru:"Классический перевод и комментарии к Бхагавад-гите от Шрилы Прабхупады. Погрузитесь в глубины ведической мудрости через призму сознания Кришны.",en:"Classical translation and commentary on the Bhagavad-gita by Srila Prabhupada. Immerse yourself in the depths of Vedic wisdom through the lens of Krishna consciousness."},hero_cta:{ru:"Купить книгу",en:"Buy Book"},author_title:{ru:"Об авторе",en:"About the Author"},author_name:{ru:"Шрила Прабхупада",en:"Srila Prabhupada"},author_description:{ru:"Основатель-ачарья Международного общества сознания Кришны (ИСККОН). Автор более 80 томов переводов и комментариев к ведическим текстам.",en:"Founder-Acharya of the International Society for Krishna Consciousness (ISKCON). Author of more than 80 volumes of translations and commentaries on Vedic texts."},reviews_title:{ru:"Отзывы читателей",en:"Reader Reviews"},review_1:{ru:'"Потрясающий перевод! Каждый стих раскрывает глубокий смысл."',en:'"Amazing translation! Every verse reveals deep meaning."'},review_author_1:{ru:"Михаил К.",en:"Mikhail K."},review_2:{ru:'"Лучшее издание Бхагавад-гиты на русском языке."',en:'"The best edition of Bhagavad-gita in Russian."'},review_author_2:{ru:"Анна С.",en:"Anna S."}}}setupLanguageToggle(){const t=document.getElementById("language-switch-container");t&&this.languageManager.createLanguageToggleButton(t)}setupImageSlider(){const t=document.getElementById("hero-slider");if(!t)return;const e=[{id:1,src:"src/images/book-covers/cover.jpg",alt:"Лицевая сторона суперобложки книги",title:"Bhagavad-gita As It Is",description:"Классическое издание 1972 года с комментариями Шрилы Прабхупады",language:"ru"},{id:2,src:"src/images/book-covers/flap1.jpg",alt:"Клапан 1 суперобложки",title:"Bhagavad-gita As It Is",description:"Детали издания и информация об авторе",language:"ru"},{id:3,src:"src/images/book-covers/flap2.jpg",alt:"Клапан 2 суперобложки",title:"Bhagavad-gita As It Is",description:"Содержание и структура книги",language:"ru"},{id:4,src:"src/images/book-covers/back.jpg",alt:"Задняя сторона суперобложки",title:"Bhagavad-gita As It Is",description:"Аннотация и отзывы о книге",language:"ru"}];this.imageSlider=new g(t,e,{autoPlay:!0,autoPlayInterval:6e3,showNavigation:!0,showIndicators:!0,transitionDuration:400,loop:!0}),this.languageManager.onLanguageChange(n=>{this.imageSlider&&this.imageSlider.changeLanguage(n)})}setupSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();const i=e.getAttribute("href");if(i){const a=document.querySelector(i);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}})})}setupIntersectionObserver(){const t={threshold:.1,rootMargin:"0px 0px -50px 0px"},e=new IntersectionObserver(i=>{i.forEach(a=>{a.isIntersecting&&a.target.classList.add("animate-in")})},t);document.querySelectorAll("section").forEach(i=>{e.observe(i)})}}document.addEventListener("DOMContentLoaded",()=>{new m});
