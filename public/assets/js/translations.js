// –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å –¥–ª—è —Å–∞–π—Ç–∞ –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞
const translations = {
    ru: {
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        nav: {
            home: "–ì–ª–∞–≤–Ω–∞—è",
            about: "–û –∫–Ω–∏–≥–µ",
            author: "–ê–≤—Ç–æ—Ä",
            buy: "–ö—É–ø–∏—Ç—å"
        },
        
        // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        home: {
            title: "–ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ –∫–∞–∫ –æ–Ω–∞ –µ—Å—Ç—å",
            subtitle: "–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–ø—Ä–∏–Ω—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–¥–∞–Ω–∏—è",
            price: "–¶–µ–Ω–∞: 1500 —Ä—É–±.",
            orderButton: "–ó–∞–∫–∞–∑–∞—Ç—å –∫–Ω–∏–≥—É",
            description: "–¢–æ—á–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–¥–∞–Ω–∏—è 1972 –≥–æ–¥–∞. –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –†–æ—Å—Å–∏–∏. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ Bhaktivedanta Book Trust."
        },
        
        // –û –∫–Ω–∏–≥–µ
        about: {
            title: "–û –∫–Ω–∏–≥–µ",
            description: "–≠—Ç–æ —Ç–æ—á–Ω—ã–π —Ä–µ–ø—Ä–∏–Ω—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–¥–∞–Ω–∏—è 1972 –≥–æ–¥–∞, –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–π Bhaktivedanta Book Trust. –ö–Ω–∏–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç:",
            features: [
                "–§–æ—Ä–º–∞—Ç –∏ –¥–∏–∑–∞–π–Ω –æ—Ä–∏–≥–∏–Ω–∞–ª–∞",
                "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ê.–ß. –ë—Ö–∞–∫—Ç–∏–≤–µ–¥–∞–Ω—Ç—ã –°–≤–∞–º–∏ –ü—Ä–∞–±—Ö—É–ø–∞–¥—ã",
                "–ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—á–∞—Ç–∏ 1972 –≥–æ–¥–∞"
            ]
        },
        
        // –û–± –∞–≤—Ç–æ—Ä–µ
        author: {
            title: "–û–± –∞–≤—Ç–æ—Ä–µ",
            description: "–ê.–ß. –ë—Ö–∞–∫—Ç–∏–≤–µ–¥–∞–Ω—Ç–∞ –°–≤–∞–º–∏ –ü—Ä–∞–±—Ö—É–ø–∞–¥–∞ (1896-1977) - –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –æ–±—â–µ—Å—Ç–≤–∞ —Å–æ–∑–Ω–∞–Ω–∏—è –ö—Ä–∏—à–Ω—ã (ISKCON) –∏ –∞–≤—Ç–æ—Ä –±–æ–ª–µ–µ 80 –∫–Ω–∏–≥ –ø–æ –≤–µ–¥–∏—á–µ—Å–∫–æ–π —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏.",
            achievements: [
                "–ü–µ—Ä–µ–≤–µ–ª –∏ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ–¥–∏—á–µ—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã",
                "–û—Å–Ω–æ–≤–∞–ª –±–æ–ª–µ–µ 100 —Ö—Ä–∞–º–æ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É",
                "–ü–æ–ª—É—á–∏–ª –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∏–∑–¥–∞–Ω–∏–µ –æ—Ç Bhaktivedanta Book Trust"
            ]
        },
        
        // –ö–æ–Ω—Ç–∞–∫—Ç—ã
        contacts: {
            title: "–ö—É–ø–∏—Ç—å –∫–Ω–∏–≥—É",
            description: "–î–ª—è –∑–∞–∫–∞–∑–∞ –∫–Ω–∏–≥–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:",
            phone: "–¢–µ–ª–µ—Ñ–æ–Ω: +7 (XXX) XXX-XX-XX",
            email: "Email: info@gita-1972-reprint.ru",
            address: "–ê–¥—Ä–µ—Å: –†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞",
            orderForm: "–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞",
            name: "–ò–º—è",
            email: "Email",
            phone: "–¢–µ–ª–µ—Ñ–æ–Ω",
            message: "–°–æ–æ–±—â–µ–Ω–∏–µ",
            sendButton: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑"
        },
        
        // –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
        orderStatus: {
            title: "–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞",
            description: "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:",
            orderNumber: "–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞",
            checkButton: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å",
            notFound: "–ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω"
        },
        
        // –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å
        thanks: {
            title: "–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!",
            description: "–í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏.",
            backToHome: "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"
        },
        
        // –û–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        common: {
            languageSwitch: "EN",
            logoAlt: "–õ–æ–≥–æ—Ç–∏–ø",
            coverAlt: "–û–±–ª–æ–∂–∫–∞ 1972 –≥–æ–¥–∞"
        }
    },
    
    en: {
        // Navigation
        nav: {
            home: "Home",
            about: "About",
            author: "Author",
            buy: "Buy"
        },
        
        // Home page
        home: {
            title: "Bhagavad-Gita As It Is",
            subtitle: "Licensed reprint of the original 1972 edition",
            price: "Price: 1500 RUB",
            orderButton: "Order Book",
            description: "Exact reproduction of the original 1972 edition. Delivery across Russia. Official permission from Bhaktivedanta Book Trust."
        },
        
        // About the book
        about: {
            title: "About the Book",
            description: "This is an exact reprint of the original 1972 edition, approved by Bhaktivedanta Book Trust. The book preserves:",
            features: [
                "Original format and design",
                "Commentaries by A.C. Bhaktivedanta Swami Prabhupada",
                "1972 printing quality"
            ]
        },
        
        // About the author
        author: {
            title: "About the Author",
            description: "A.C. Bhaktivedanta Swami Prabhupada (1896-1977) is the founder of the International Society for Krishna Consciousness (ISKCON) and the author of more than 80 books on Vedic philosophy.",
            achievements: [
                "Translated and commented on major Vedic texts",
                "Founded more than 100 temples worldwide",
                "Received official permission for publication from Bhaktivedanta Book Trust"
            ]
        },
        
        // Contacts
        contacts: {
            title: "Buy the Book",
            description: "To order the book, contact us:",
            phone: "Phone: +7 (XXX) XXX-XX-XX",
            email: "Email: info@gita-1972-reprint.ru",
            address: "Address: Russia, Moscow",
            orderForm: "Order Form",
            name: "Name",
            email: "Email",
            phone: "Phone",
            message: "Message",
            sendButton: "Send Order"
        },
        
        // Order status
        orderStatus: {
            title: "Order Status",
            description: "Enter your order number to check the status:",
            orderNumber: "Order Number",
            checkButton: "Check Status",
            notFound: "Order not found"
        },
        
        // Thank you
        thanks: {
            title: "Thank you for your order!",
            description: "Your order has been received. We will contact you shortly to confirm delivery details.",
            backToHome: "Back to Home"
        },
        
        // Common elements
        common: {
            languageSwitch: "RU",
            logoAlt: "Logo",
            coverAlt: "1972 Edition Cover"
        }
    }
};

// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
class UniversalTranslator {
    constructor() {
        this.currentLang = 'ru';
        this.translations = translations;
    }
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —è–∑—ã–∫
    setLanguage(lang) {
        this.currentLang = lang;
        this.translatePage();
    }
    
    // –ü–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–µ–≤–æ–¥ –ø–æ –∫–ª—é—á—É
    getTranslation(key, fallback = '') {
        const keys = key.split('.');
        let value = this.translations[this.currentLang];
        
        for (const k of keys) {
            if (value && value[k] !== undefined) {
                value = value[k];
            } else {
                return fallback;
            }
        }
        
        return value;
    }
    
    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    translatePage() {
        console.log(`üåç –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ —è–∑—ã–∫: ${this.currentLang}`);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        this.updatePageTitle();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º meta description
        this.updateMetaDescription();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
        this.updateNavigation();
        
        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        this.translateMainContent();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º alt –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        this.updateImageAlt();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞
        this.updateLanguageSwitch();
        
        console.log('‚úÖ –ü–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≤–µ—Ä—à–µ–Ω');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    updatePageTitle() {
        const title = document.querySelector('title');
        if (!title) return;
        
        const pageType = this.detectPageType();
        let newTitle = '';
        
        switch (pageType) {
            case 'home':
                newTitle = this.currentLang === 'ru' ? 
                    '–ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972 ‚Äî –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–ø—Ä–∏–Ω—Ç' : 
                    'Bhagavad-Gita 1972 ‚Äî Licensed Reprint';
                break;
            case 'about':
                newTitle = this.currentLang === 'ru' ? 
                    '–û –∫–Ω–∏–≥–µ ‚Äî –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972' : 
                    'About the Book ‚Äî Bhagavad-Gita 1972';
                break;
            case 'author':
                newTitle = this.currentLang === 'ru' ? 
                    '–û–± –∞–≤—Ç–æ—Ä–µ ‚Äî –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972' : 
                    'About the Author ‚Äî Bhagavad-Gita 1972';
                break;
            case 'contacts':
                newTitle = this.currentLang === 'ru' ? 
                    '–ö—É–ø–∏—Ç—å –∫–Ω–∏–≥—É ‚Äî –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972' : 
                    'Buy the Book ‚Äî Bhagavad-Gita 1972';
                break;
            case 'order-status':
                newTitle = this.currentLang === 'ru' ? 
                    '–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ ‚Äî –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972' : 
                    'Order Status ‚Äî Bhagavad-Gita 1972';
                break;
            case 'thanks':
                newTitle = this.currentLang === 'ru' ? 
                    '–°–ø–∞—Å–∏–±–æ ‚Äî –ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972' : 
                    'Thank You ‚Äî Bhagavad-Gita 1972';
                break;
            default:
                newTitle = this.currentLang === 'ru' ? 
                    '–ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ 1972' : 
                    'Bhagavad-Gita 1972';
        }
        
        title.textContent = newTitle;
    }
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    detectPageType() {
        const path = window.location.pathname;
        if (path.includes('index.html') || path === '/') return 'home';
        if (path.includes('about.html')) return 'about';
        if (path.includes('author.html')) return 'author';
        if (path.includes('contacts.html')) return 'contacts';
        if (path.includes('order-status.html')) return 'order-status';
        if (path.includes('thanks.html')) return 'thanks';
        if (path.includes('test-i18n.html')) return 'test';
        if (path.includes('demo-i18n.html')) return 'demo';
        return 'unknown';
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ—Ç meta description
    updateMetaDescription() {
        const metaDescription = document.querySelector('meta[name="description"]');
        if (metaDescription) {
            metaDescription.content = this.getTranslation('home.description');
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é
    updateNavigation() {
        const navLinks = document.querySelectorAll('nav a');
        navLinks.forEach((link, index) => {
            if (index === 0) link.textContent = this.getTranslation('nav.home');
            else if (index === 1) link.textContent = this.getTranslation('nav.about');
            else if (index === 2) link.textContent = this.getTranslation('nav.author');
            else if (index === 3) link.textContent = this.getTranslation('nav.buy');
        });
    }
    
    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    translateMainContent() {
        const main = document.querySelector('main');
        if (!main) return;
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
        this.translateHeadings(main);
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã
        this.translateParagraphs(main);
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–ø–∏—Å–∫–∏
        this.translateLists(main);
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º –∫–Ω–æ–ø–∫–∏
        this.translateButtons(main);
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Ñ–æ—Ä–º—ã
        this.translateForms(main);
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å—Å—ã–ª–∫–∏
        this.translateLinks(main);
        
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º div —ç–ª–µ–º–µ–Ω—Ç—ã (–¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
        this.translateDivs(main);
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏
    translateHeadings(main) {
        const headings = main.querySelectorAll('h1, h2, h3, h4, h5, h6');
        headings.forEach(heading => {
            const text = heading.textContent.trim();
            const translation = this.findTranslationForText(text);
            if (translation) {
                heading.textContent = translation;
                console.log(`üìù –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω: "${text}" ‚Üí "${translation}"`);
            }
        });
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã
    translateParagraphs(main) {
        const paragraphs = main.querySelectorAll('p');
        paragraphs.forEach(p => {
            const text = p.textContent.trim();
            const translation = this.findTranslationForText(text);
            if (translation) {
                p.textContent = translation;
                console.log(`üìù –ü–∞—Ä–∞–≥—Ä–∞—Ñ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω: "${text}" ‚Üí "${translation}"`);
            }
        });
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–ø–∏—Å–∫–∏
    translateLists(main) {
        const listItems = main.querySelectorAll('li');
        listItems.forEach(li => {
            const text = li.textContent.trim();
            const translation = this.findTranslationForText(text);
            if (translation) {
                li.textContent = translation;
                console.log(`üìù –≠–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω: "${text}" ‚Üí "${translation}"`);
            }
        });
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –∫–Ω–æ–ø–∫–∏
    translateButtons(main) {
        const buttons = main.querySelectorAll('button:not(.language-switch)');
        buttons.forEach(button => {
            const text = button.textContent.trim();
            const translation = this.findTranslationForText(text);
            if (translation) {
                button.textContent = translation;
                console.log(`üìù –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞: "${text}" ‚Üí "${translation}"`);
            }
        });
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Ñ–æ—Ä–º—ã
    translateForms(main) {
        const labels = main.querySelectorAll('label');
        labels.forEach(label => {
            const text = label.textContent.replace(':', '').trim();
            const translation = this.findTranslationForText(text);
            if (translation) {
                label.textContent = translation + ':';
                console.log(`üìù –ú–µ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞: "${text}" ‚Üí "${translation}"`);
            }
        });
        
        const placeholders = main.querySelectorAll('input[placeholder], textarea[placeholder]');
        placeholders.forEach(input => {
            const text = input.placeholder;
            const translation = this.findTranslationForText(text);
            if (translation) {
                input.placeholder = translation;
                console.log(`üìù Placeholder –ø–µ—Ä–µ–≤–µ–¥–µ–Ω: "${text}" ‚Üí "${translation}"`);
            }
        });
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Å—Å—ã–ª–∫–∏
    translateLinks(main) {
        const links = main.querySelectorAll('a');
        links.forEach(link => {
            const text = link.textContent.trim();
            const translation = this.findTranslationForText(text);
            if (translation) {
                link.textContent = translation;
                console.log(`üìù –°—Å—ã–ª–∫–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞: "${text}" ‚Üí "${translation}"`);
            }
        });
    }
    
    // –ü–µ—Ä–µ–≤–æ–¥–∏—Ç div —ç–ª–µ–º–µ–Ω—Ç—ã (–¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
    translateDivs(main) {
        const divs = main.querySelectorAll('div');
        divs.forEach(div => {
            // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ div —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º (–±–µ–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
            if (div.children.length === 0 && div.textContent.trim()) {
                const text = div.textContent.trim();
                const translation = this.findTranslationForText(text);
                if (translation) {
                    div.textContent = translation;
                    console.log(`üìù Div –ø–µ—Ä–µ–≤–µ–¥–µ–Ω: "${text}" ‚Üí "${translation}"`);
                }
            }
        });
    }
    
    // –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è —Ç–µ–∫—Å—Ç–∞
    findTranslationForText(text) {
        // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç -> –∫–ª—é—á –ø–µ—Ä–µ–≤–æ–¥–∞
        const textMap = this.createTextMap();
        
        // –ò—â–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        if (textMap[text]) {
            return this.getTranslation(textMap[text]);
        }
        
        // –ò—â–µ–º —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–¥–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞)
        for (const [russianText, translationKey] of Object.entries(textMap)) {
            if (russianText.includes(text) || text.includes(russianText)) {
                return this.getTranslation(translationKey);
            }
        }
        
        // –ò—â–µ–º –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (–¥–ª—è –±–æ–ª–µ–µ —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞)
        const keywordMap = this.createKeywordMap();
        for (const [keyword, translationKey] of Object.entries(keywordMap)) {
            if (text.toLowerCase().includes(keyword.toLowerCase())) {
                return this.getTranslation(translationKey);
            }
        }
        
        return null;
    }
    
    // –°–æ–∑–¥–∞–µ—Ç –∫–∞—Ä—Ç—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç -> –∫–ª—é—á –ø–µ—Ä–µ–≤–æ–¥–∞
    createTextMap() {
        const map = {};
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        map['–ì–ª–∞–≤–Ω–∞—è'] = 'nav.home';
        map['–û –∫–Ω–∏–≥–µ'] = 'nav.about';
        map['–ê–≤—Ç–æ—Ä'] = 'nav.author';
        map['–ö—É–ø–∏—Ç—å'] = 'nav.buy';
        
        // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        map['–ë—Ö–∞–≥–∞–≤–∞–¥-–ì–∏—Ç–∞ –∫–∞–∫ –æ–Ω–∞ –µ—Å—Ç—å'] = 'home.title';
        map['–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–ø—Ä–∏–Ω—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–¥–∞–Ω–∏—è'] = 'home.subtitle';
        map['–¶–µ–Ω–∞: 1500 —Ä—É–±.'] = 'home.price';
        map['–ó–∞–∫–∞–∑–∞—Ç—å –∫–Ω–∏–≥—É'] = 'home.orderButton';
        
        // –û –∫–Ω–∏–≥–µ
        map['–û –∫–Ω–∏–≥–µ'] = 'about.title';
        map['–≠—Ç–æ —Ç–æ—á–Ω—ã–π —Ä–µ–ø—Ä–∏–Ω—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–¥–∞–Ω–∏—è 1972 –≥–æ–¥–∞, –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–π Bhaktivedanta Book Trust. –ö–Ω–∏–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç:'] = 'about.description';
        map['–§–æ—Ä–º–∞—Ç –∏ –¥–∏–∑–∞–π–Ω –æ—Ä–∏–≥–∏–Ω–∞–ª–∞'] = 'about.features.0';
        map['–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ê.–ß. –ë—Ö–∞–∫—Ç–∏–≤–µ–¥–∞–Ω—Ç—ã –°–≤–∞–º–∏ –ü—Ä–∞–±—Ö—É–ø–∞–¥—ã'] = 'about.features.1';
        map['–ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—á–∞—Ç–∏ 1972 –≥–æ–¥–∞'] = 'about.features.2';
        
        // –û–± –∞–≤—Ç–æ—Ä–µ
        map['–û–± –∞–≤—Ç–æ—Ä–µ'] = 'author.title';
        map['–ê.–ß. –ë—Ö–∞–∫—Ç–∏–≤–µ–¥–∞–Ω—Ç–∞ –°–≤–∞–º–∏ –ü—Ä–∞–±—Ö—É–ø–∞–¥–∞ (1896-1977) - –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –æ–±—â–µ—Å—Ç–≤–∞ —Å–æ–∑–Ω–∞–Ω–∏—è –ö—Ä–∏—à–Ω—ã (ISKCON) –∏ –∞–≤—Ç–æ—Ä –±–æ–ª–µ–µ 80 –∫–Ω–∏–≥ –ø–æ –≤–µ–¥–∏—á–µ—Å–∫–æ–π —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏.'] = 'author.description';
        map['–ü–µ—Ä–µ–≤–µ–ª –∏ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ–¥–∏—á–µ—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã'] = 'author.achievements.0';
        map['–û—Å–Ω–æ–≤–∞–ª –±–æ–ª–µ–µ 100 —Ö—Ä–∞–º–æ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É'] = 'author.achievements.1';
        map['–ü–æ–ª—É—á–∏–ª –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∏–∑–¥–∞–Ω–∏–µ –æ—Ç Bhaktivedanta Book Trust'] = 'author.achievements.2';
        
        // –ö–æ–Ω—Ç–∞–∫—Ç—ã
        map['–ö—É–ø–∏—Ç—å –∫–Ω–∏–≥—É'] = 'contacts.title';
        map['–î–ª—è –∑–∞–∫–∞–∑–∞ –∫–Ω–∏–≥–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:'] = 'contacts.description';
        map['–¢–µ–ª–µ—Ñ–æ–Ω: +7 (XXX) XXX-XX-XX'] = 'contacts.phone';
        map['Email: info@gita-1972-reprint.ru'] = 'contacts.email';
        map['–ê–¥—Ä–µ—Å: –†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞'] = 'contacts.address';
        map['–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞'] = 'contacts.orderForm';
        map['–ò–º—è'] = 'contacts.name';
        map['–¢–µ–ª–µ—Ñ–æ–Ω'] = 'contacts.phone';
        map['–°–æ–æ–±—â–µ–Ω–∏–µ'] = 'contacts.message';
        map['–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑'] = 'contacts.sendButton';
        
        // –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
        map['–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞'] = 'orderStatus.title';
        map['–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:'] = 'orderStatus.description';
        map['–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞'] = 'orderStatus.orderNumber';
        map['–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å'] = 'orderStatus.checkButton';
        
        // –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å
        map['–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!'] = 'thanks.title';
        map['–í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏.'] = 'thanks.description';
        map['–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é'] = 'thanks.backToHome';
        
        return map;
    }
    
    // –°–æ–∑–¥–∞–µ—Ç –∫–∞—Ä—Ç—É –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
    createKeywordMap() {
        const map = {};
        
        // –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        map['–≥–ª–∞–≤–Ω–∞—è'] = 'nav.home';
        map['–∫–Ω–∏–≥–µ'] = 'nav.about';
        map['–∞–≤—Ç–æ—Ä'] = 'nav.author';
        map['–∫—É–ø–∏—Ç—å'] = 'nav.buy';
        
        // –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
        map['–∞–≤—Ç–æ—Ä–µ'] = 'author.title';
        map['–∫–Ω–∏–≥—É'] = 'contacts.title';
        map['–∑–∞–∫–∞–∑–∞'] = 'orderStatus.title';
        map['—Å–ø–∞—Å–∏–±–æ'] = 'thanks.title';
        
        // –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ñ–æ—Ä–º
        map['–∏–º—è'] = 'contacts.name';
        map['—Ç–µ–ª–µ—Ñ–æ–Ω'] = 'contacts.phone';
        map['—Å–æ–æ–±—â–µ–Ω–∏–µ'] = 'contacts.message';
        map['–æ—Ç–ø—Ä–∞–≤–∏—Ç—å'] = 'contacts.sendButton';
        map['—Ñ–æ—Ä–º–∞'] = 'contacts.orderForm';
        
        // –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        map['–∑–∞–∫–∞–∑–∞—Ç—å'] = 'home.orderButton';
        map['–ø—Ä–æ–≤–µ—Ä–∏—Ç—å'] = 'orderStatus.checkButton';
        
        return map;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ—Ç alt –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    updateImageAlt() {
        const logo = document.querySelector('.logo');
        if (logo) logo.alt = this.getTranslation('common.logoAlt');
        
        const cover = document.querySelector('.book-cover');
        if (cover) cover.alt = this.getTranslation('common.coverAlt');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞
    updateLanguageSwitch() {
        const switchBtn = document.querySelector('.language-switch');
        if (switchBtn) {
            switchBtn.textContent = this.currentLang === 'ru' ? 'EN' : 'RU';
            switchBtn.onclick = () => this.switchLanguage();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
            switchBtn.classList.add('changing');
            setTimeout(() => {
                switchBtn.classList.remove('changing');
            }, 300);
        }
    }
    
    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —è–∑—ã–∫
    switchLanguage() {
        const newLang = this.currentLang === 'ru' ? 'en' : 'ru';
        this.setLanguage(newLang);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
        localStorage.setItem('selectedLanguage', newLang);
        
        console.log(`üîÑ –Ø–∑—ã–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞: ${newLang}`);
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–≤–æ–¥
    init() {
        // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫
        const savedLang = localStorage.getItem('selectedLanguage') || 'ru';
        this.setLanguage(savedLang);
    }
}

// –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞
const translator = new UniversalTranslator();

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
function switchLanguage(lang) {
    translator.setLanguage(lang);
    localStorage.setItem('selectedLanguage', lang);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —è–∑—ã–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
function initializeLanguage() {
    translator.init();
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', initializeLanguage);
