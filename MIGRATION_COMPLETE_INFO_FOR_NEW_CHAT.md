# üéâ –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê - –ù–û–í–ê–Ø VM –ò–ù–§–û–†–ú–ê–¶–ò–Ø
*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 27 –∞–≤–≥—É—Å—Ç–∞ 2025, 04:21*

## ‚úÖ **–ù–û–í–ê–Ø VM (–ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–ß–ê–Ø)**

### üîß **VM –ü–ê–†–ê–ú–ï–¢–†–´:**
- **ID:** `fhmqd2mct32i12bapfn1`
- **–ò–º—è:** `gita-1972-reprint-new`
- **IP:** `46.21.247.218` (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π, –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω —Å–æ —Å—Ç–∞—Ä–æ–π VM)
- **–ó–æ–Ω–∞:** `ru-central1-a`
- **–û–±—Ä–∞–∑:** `ubuntu-2404-lts-oslogin-v20240902`
- **–°—Ç–∞—Ç—É—Å:** `RUNNING` ‚úÖ

### üí∞ **–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –¢–ê–†–ò–§–ò–ö–ê–¶–ò–Ø:**
- **Core fraction:** 5% (—ç–∫–æ–Ω–æ–º–∏—è 95%)
- **Cores:** 2
- **Memory:** 2GB
- **Disk:** 20GB
- **Preemptible:** true (—Å–∫–∏–¥–∫–∞ 70%)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~300‚ÇΩ/–º–µ—Å—è—Ü (–±—ã–ª–æ ~3000‚ÇΩ/–º–µ—Å—è—Ü)
- **–≠–ö–û–ù–û–ú–ò–Ø:** 2700‚ÇΩ/–º–µ—Å—è—Ü (90%)

## üöÄ **–°–ï–†–í–ò–°–´ –ù–ê –ù–û–í–û–ô VM**

### üåê **API –°–ï–†–í–ï–†:**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **URL:** `http://46.21.247.218:3000/api/status`
- **–ü–æ—Ä—Ç:** 3000
- **Framework:** Express.js + Node.js v20
- **–ü—Ä–æ–±–ª–µ–º–∞ ES modules:** –ò–°–ü–†–ê–í–õ–ï–ù–ê (—É–±—Ä–∞–Ω "type": "module")

### ü§ñ **YANDEX SERVER AGENT:**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù (systemd —Å–µ—Ä–≤–∏—Å)
- **–í–µ—Ä—Å–∏—è:** 2.1.0 —Å AI –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
- **–ü—É—Ç—å:** `/home/egorkara/server-agent/`
- **Service:** `yandex-server-agent.service`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `egorkara`

#### **AI –ú–û–î–£–õ–ò:**
- **ai_log_analyzer.py** - AI –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ (YandexGPT —Å–∏–º—É–ª—è—Ü–∏—è)
- **telegram_notifier.py** - Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **yandex_monitoring_integration.py** - –º–µ—Ç—Ä–∏–∫–∏ –≤ Yandex Monitoring

#### **–ú–û–ù–ò–¢–û–†–ò–ù–ì:**
- **API:** –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:** CPU, RAM, –¥–∏—Å–∫
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- **AI –∞–Ω–∞–ª–∏–∑:** –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- **–ú–µ—Ç—Ä–∏–∫–∏:** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

## üì± **TELEGRAM –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø**

### **–ë–û–¢ –ò–ù–§–û–†–ú–ê–¶–ò–Ø:**
- **–ò–º—è –±–æ—Ç–∞:** `@Gita_server_monitor_bot`
- **Token:** `8319867749:AAFOq66KNx85smfgtrvFsoBc-KABOPbcX0s`
- **Chat ID:** `6878699213`
- **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### **–ö–û–ú–ê–ù–î–´ –ë–û–¢–ê:**
- `/status` - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `/services` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- `/logs` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
- `/restart_api` - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ API
- `/check_ssl` - –ø—Ä–æ–≤–µ—Ä–∫–∞ SSL
- `/help` - –ø–æ–º–æ—â—å

## üîê **GITHUB SECRETS (–ù–ê–°–¢–†–û–ï–ù–´)**

```bash
# Yandex Server Agent & Telegram
YANDEX_VM_ID=fhmqd2mct32i12bapfn1
YANDEX_VM_IP=46.21.247.218
TELEGRAM_BOT_TOKEN=8319867749:AAFOq66KNx85smfgtrvFsoBc-KABOPbcX0s
TELEGRAM_CHAT_ID=6878699213

# Yandex Cloud API
YC_FOLDER_ID=b1ggm01ncoamcljg44qa
YC_ZONE=ru-central1-a

# Project Configuration
API_BASE_URL=http://46.21.247.218:3000
PROJECT_DOMAIN=gita-1972-reprint.ru
API_DOMAIN=api.gita-1972-reprint.ru
```

## üîó **SSH –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï**

### **–†–ê–ë–û–ß–ò–ï –ö–û–ú–ê–ù–î–´:**
```bash
# Yandex Cloud CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
yc compute ssh fhmqd2mct32i12bapfn1

# –ü—Ä—è–º–æ–π SSH
ssh -i ~/.ssh/ssh-key-1753182147967 egorkara@46.21.247.218

# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã)
./scripts/ssh-ultra-safe.sh check
./scripts/ssh-ultra-safe.sh status
```

## ‚ö†Ô∏è **–¢–ï–ö–£–©–ò–ï –ó–ê–î–ê–ß–ò**

### **–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø:**
1. **DNS –∑–∞–ø–∏—Å–∏** - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–æ–≤—ã–π IP:
   - `api.gita-1972-reprint.ru` ‚Üí `46.21.247.218`
   - `gita-1972-reprint.ru` ‚Üí `46.21.247.218`

2. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** - –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è –Ω–æ–≤–æ–π VM

3. **Telegram —Ç–æ–∫–µ–Ω** - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ agent –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

4. **–°—Ç–∞—Ä–∞—è VM** - `fhmmuttj78nf215noffh` –≥–æ—Ç–æ–≤–∞ –∫ —É–¥–∞–ª–µ–Ω–∏—é

### **–ü–†–û–í–ï–†–ï–ù–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´:**
- ‚úÖ API —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ SSH –¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Yandex Server Agent –∑–∞–ø—É—â–µ–Ω
- ‚úÖ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ systemd —Å–µ—Ä–≤–∏—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω
- ‚úÖ –¢–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

## üóÇÔ∏è **–§–ê–ô–õ–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê**

### **–ü–†–û–ï–ö–¢:**
```
/home/egorkara/gita-1972/
‚îú‚îÄ‚îÄ src/              # API –∫–æ–¥
‚îú‚îÄ‚îÄ deployment/       # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ server-agent/     # –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∞–≥–µ–Ω—Ç–∞
```

### **YANDEX SERVER AGENT:**
```
/home/egorkara/server-agent/
‚îú‚îÄ‚îÄ yandex-server-agent.py        # –û—Å–Ω–æ–≤–Ω–æ–π –∞–≥–µ–Ω—Ç
‚îú‚îÄ‚îÄ agent-config.json             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
‚îú‚îÄ‚îÄ ai_log_analyzer.py            # AI –∞–Ω–∞–ª–∏–∑
‚îú‚îÄ‚îÄ telegram_notifier.py          # Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ yandex_monitoring_integration.py # –ú–µ—Ç—Ä–∏–∫–∏
‚îú‚îÄ‚îÄ sync-with-cursor.py           # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ logs/                         # –õ–æ–≥–∏ –∞–≥–µ–Ω—Ç–∞
```

## üìä **–ö–û–ú–ê–ù–î–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **YANDEX SERVER AGENT:**
```bash
# –°—Ç–∞—Ç—É—Å
sudo systemctl status yandex-server-agent

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart yandex-server-agent

# –õ–æ–≥–∏
sudo journalctl -u yandex-server-agent -f

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)
cd /home/egorkara/server-agent
python3 yandex-server-agent.py
```

### **API –°–ï–†–í–ï–†:**
```bash
# –°—Ç–∞—Ç—É—Å
systemctl status gita-api

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
cd /home/egorkara/gita-1972
node src/server.js

# –ü—Ä–æ–≤–µ—Ä–∫–∞
curl http://46.21.247.218:3000/api/status
```

## üéØ **–î–õ–Ø –ü–†–û–î–û–õ–ñ–ï–ù–ò–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò**

### **–ü–†–ò–û–†–ò–¢–ï–¢–´:**
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS** - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏
2. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Telegram** - –≤–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Let's Encrypt
4. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é VM** - –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã
5. **AI —É–ª—É—á—à–µ–Ω–∏—è** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º YandexGPT API

### **–ì–û–¢–û–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ AI –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ (—Å–∏–º—É–ª—è—Ü–∏—è)
- ‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≥–æ—Ç–æ–≤–∞)
- ‚úÖ Yandex Cloud API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ SSH —Å–∫—Ä–∏–ø—Ç—ã
- ‚úÖ GitHub Secrets –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üí° **–í–ê–ñ–ù–´–ï –ö–û–ú–ê–ù–î–´**

### **–ü–†–û–í–ï–†–ö–ê –í–°–ï–• –°–ò–°–¢–ï–ú:**
```bash
# API
curl -s http://46.21.247.218:3000/api/status

# Agent
sudo systemctl status yandex-server-agent

# SSH (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
./scripts/ssh-ultra-safe.sh check

# –†–µ—Å—É—Ä—Å—ã VM
yc compute instance get fhmqd2mct32i12bapfn1
```

---

## üöÄ **–°–¢–ê–¢–£–°: –ì–û–¢–û–í –ö –ü–†–û–î–û–õ–ñ–ï–ù–ò–Æ!**

**–ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ù–æ–≤–∞—è VM –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞.**
**–≠–∫–æ–Ω–æ–º–∏—è 2700‚ÇΩ/–º–µ—Å—è—Ü –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞. –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç.**

**–î–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫–∞–∫ –±–∞–∑–æ–≤—É—é.**
